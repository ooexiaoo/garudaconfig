"use strict";(globalThis.webpackChunkproton_pass_extension=globalThis.webpackChunkproton_pass_extension||[]).push([["node_modules_pmcrypto_node_modules_openpgp_dist_lightweight_ponyfill_es6_min_mjs"],{22494:(e,t,r)=>{let o;r.r(t),r.d(t,{ByteLengthQueuingStrategy:()=>tB,CountQueuingStrategy:()=>tM,ReadableByteStreamController:()=>el,ReadableStream:()=>tT,ReadableStreamBYOBReader:()=>ek,ReadableStreamBYOBRequest:()=>ea,ReadableStreamDefaultController:()=>tc,ReadableStreamDefaultReader:()=>H,TransformStream:()=>tx,TransformStreamDefaultController:()=>tV,WritableStream:()=>eF,WritableStreamDefaultController:()=>e1,WritableStreamDefaultWriter:()=>eU}),/*! OpenPGP.js v5.11.2-0 - 2024-04-12 - this is LGPL licensed code, see LICENSE/our website https://openpgpjs.org/ for more information. */"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;let n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol:e=>`Symbol(${e})`;function i(){}let a="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0;function l(e){return"object"==typeof e&&null!==e||"function"==typeof e}let s=Promise,u=Promise.prototype.then,d=Promise.resolve.bind(s),c=Promise.reject.bind(s);function h(e){return new s(e)}function _(e,t,r){return u.call(e,t,r)}function f(e,t,r){_(_(e,t,r),void 0,i)}function b(e){_(e,void 0,i)}let p=(()=>{let e=a&&a.queueMicrotask;if("function"==typeof e)return e;let t=d(void 0);return e=>_(t,e)})();function m(e,t,r){if("function"!=typeof e)throw TypeError("Argument is not a function");return Function.prototype.apply.call(e,t,r)}function y(e,t,r){try{var o;return o=m(e,t,r),d(o)}catch(e){return c(e)}}class g{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(e){let t=this._back,r=t;16383===t._elements.length&&(r={_elements:[],_next:void 0}),t._elements.push(e),r!==t&&(this._back=r,t._next=r),++this._size}shift(){let e=this._front,t=e,r=this._cursor,o=r+1,n=e._elements,i=n[r];return 16384===o&&(t=e._next,o=0),--this._size,this._cursor=o,e!==t&&(this._front=t),n[r]=void 0,i}forEach(e){let t=this._cursor,r=this._front,o=r._elements;for(;!(t===o.length&&void 0===r._next||t===o.length&&(o=(r=r._next)._elements,t=0,0===o.length));)e(o[t]),++t}peek(){let e=this._front,t=this._cursor;return e._elements[t]}}function v(e,t){var r;e._ownerReadableStream=t,t._reader=e,"readable"===t._state?T(e):"closed"===t._state?(T(e),q(e)):(r=t._storedError,T(e),P(e,r))}function S(e,t){return tk(e._ownerReadableStream,t)}function w(e){var t;"readable"===e._ownerReadableStream._state?P(e,TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):(t=TypeError("Reader was released and can no longer be used to monitor the stream's closedness"),T(e),P(e,t)),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0}function R(e){return TypeError("Cannot "+e+" a stream using a released reader")}function T(e){e._closedPromise=h((t,r)=>{e._closedPromise_resolve=t,e._closedPromise_reject=r})}function P(e,t){void 0!==e._closedPromise_reject&&(b(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function q(e){void 0!==e._closedPromise_resolve&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}let E=n("[[AbortSteps]]"),C=n("[[ErrorSteps]]"),k=n("[[CancelSteps]]"),O=n("[[PullSteps]]"),W=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)},j=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function A(e,t){if(void 0!==e&&"object"!=typeof e&&"function"!=typeof e)throw TypeError(t+" is not an object.")}function z(e,t){if("function"!=typeof e)throw TypeError(t+" is not a function.")}function B(e,t){if(!("object"==typeof e&&null!==e||"function"==typeof e))throw TypeError(t+" is not an object.")}function F(e,t,r){if(void 0===e)throw TypeError(`Parameter ${t} is required in '${r}'.`)}function I(e,t,r){if(void 0===e)throw TypeError(`${t} is required in '${r}'.`)}function L(e){return Number(e)}function M(e,t){var r,o;let n=Number.MAX_SAFE_INTEGER,i=Number(e);if(!W(i=0===(r=i)?0:r))throw TypeError(t+" is not a finite number");if((i=0===(o=j(i))?0:o)<0||i>n)throw TypeError(`${t} is outside the accepted range of 0 to ${n}, inclusive`);return W(i)&&0!==i?i:0}function $(e,t){if(!tE(e))throw TypeError(t+" is not a ReadableStream.")}function D(e){return new H(e)}function x(e,t){e._reader._readRequests.push(t)}function N(e,t,r){let o=e._reader._readRequests.shift();r?o._closeSteps():o._chunkSteps(t)}function Q(e){return e._reader._readRequests.length}function Y(e){let t=e._reader;return void 0!==t&&!!V(t)}class H{constructor(e){if(F(e,1,"ReadableStreamDefaultReader"),$(e,"First parameter"),tC(e))throw TypeError("This stream has already been locked for exclusive reading by another reader");v(this,e),this._readRequests=new g}get closed(){return V(this)?this._closedPromise:c(G("closed"))}cancel(e){return V(this)?void 0===this._ownerReadableStream?c(R("cancel")):S(this,e):c(G("cancel"))}read(){let e,t;if(!V(this))return c(G("read"));if(void 0===this._ownerReadableStream)return c(R("read from"));let r=h((r,o)=>{e=r,t=o});return U(this,{_chunkSteps:t=>e({value:t,done:!1}),_closeSteps:()=>e({value:void 0,done:!0}),_errorSteps:e=>t(e)}),r}releaseLock(){if(!V(this))throw G("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readRequests.length>0)throw TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");w(this)}}}function V(e){return!!l(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readRequests")}function U(e,t){let r=e._ownerReadableStream;r._disturbed=!0,"closed"===r._state?t._closeSteps():"errored"===r._state?t._errorSteps(r._storedError):r._readableStreamController[O](t)}function G(e){return TypeError(`ReadableStreamDefaultReader.prototype.${e} can only be used on a ReadableStreamDefaultReader`)}Object.defineProperties(H.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),"symbol"==typeof n.toStringTag&&Object.defineProperty(H.prototype,n.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0}),"symbol"==typeof n.asyncIterator&&Object.defineProperty(o={[n.asyncIterator](){return this}},n.asyncIterator,{enumerable:!1});class X{constructor(e,t){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=e,this._preventCancel=t}next(){let e=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?_(this._ongoingPromise,e,e):e(),this._ongoingPromise}return(e){let t=()=>this._returnSteps(e);return this._ongoingPromise?_(this._ongoingPromise,t,t):t()}_nextSteps(){let e,t;if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let r=this._reader;if(void 0===r._ownerReadableStream)return c(R("iterate"));let o=h((r,o)=>{e=r,t=o});return U(r,{_chunkSteps:t=>{this._ongoingPromise=void 0,p(()=>e({value:t,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,w(r),e({value:void 0,done:!0})},_errorSteps:e=>{this._ongoingPromise=void 0,this._isFinished=!0,w(r),t(e)}}),o}_returnSteps(e){if(this._isFinished)return Promise.resolve({value:e,done:!0});this._isFinished=!0;let t=this._reader;if(void 0===t._ownerReadableStream)return c(R("finish iterating"));if(!this._preventCancel){let r=S(t,e);return w(t),_(r,()=>({value:e,done:!0}),void 0)}return w(t),d({value:e,done:!0})}}let J={next(){return K(this)?this._asyncIteratorImpl.next():c(Z("next"))},return(e){return K(this)?this._asyncIteratorImpl.return(e):c(Z("return"))}};function K(e){return!!l(e)&&!!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl")}function Z(e){return TypeError(`ReadableStreamAsyncIterator.${e} can only be used on a ReadableSteamAsyncIterator`)}void 0!==o&&Object.setPrototypeOf(J,o);let ee=Number.isNaN||function(e){return e!=e};function et(e){return!!(!("number"!=typeof e||ee(e))&&!(e<0))&&e!==1/0}function er(e){let t=e._queue.shift();return e._queueTotalSize-=t.size,e._queueTotalSize<0&&(e._queueTotalSize=0),t.value}function eo(e,t,r){if(!et(r=Number(r)))throw RangeError("Size must be a finite, non-NaN, non-negative number.");e._queue.push({value:t,size:r}),e._queueTotalSize+=r}function en(e){e._queue=new g,e._queueTotalSize=0}function ei(e){return e.slice()}class ea{constructor(){throw TypeError("Illegal constructor")}get view(){if(!eu(this))throw eT("view");return this._view}respond(e){if(!eu(this))throw eT("respond");if(F(e,1,"respond"),e=M(e,"First parameter"),void 0===this._associatedReadableByteStreamController)throw TypeError("This BYOB request has been invalidated");this._view.buffer,function(e,t){if(!et(t=Number(t)))throw RangeError("bytesWritten must be a finite");eg(e,t)}(this._associatedReadableByteStreamController,e)}respondWithNewView(e){if(!eu(this))throw eT("respondWithNewView");if(F(e,1,"respondWithNewView"),!ArrayBuffer.isView(e))throw TypeError("You can only respond with array buffer views");if(0===e.byteLength)throw TypeError("chunk must have non-zero byteLength");if(0===e.buffer.byteLength)throw TypeError("chunk's buffer must have non-zero byteLength");if(void 0===this._associatedReadableByteStreamController)throw TypeError("This BYOB request has been invalidated");!function(e,t){let r=e._pendingPullIntos.peek();if(r.byteOffset+r.bytesFilled!==t.byteOffset)throw RangeError("The region specified by view does not match byobRequest");if(r.byteLength!==t.byteLength)throw RangeError("The buffer of view has different capacity than byobRequest");r.buffer=t.buffer,eg(e,t.byteLength)}(this._associatedReadableByteStreamController,e)}}Object.defineProperties(ea.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),"symbol"==typeof n.toStringTag&&Object.defineProperty(ea.prototype,n.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class el{constructor(){throw TypeError("Illegal constructor")}get byobRequest(){if(!es(this))throw eP("byobRequest");if(null===this._byobRequest&&this._pendingPullIntos.length>0){let e=this._pendingPullIntos.peek(),t=new Uint8Array(e.buffer,e.byteOffset+e.bytesFilled,e.byteLength-e.bytesFilled),r=Object.create(ea.prototype);r._associatedReadableByteStreamController=this,r._view=t,this._byobRequest=r}return this._byobRequest}get desiredSize(){if(!es(this))throw eP("desiredSize");return eR(this)}close(){if(!es(this))throw eP("close");if(this._closeRequested)throw TypeError("The stream has already been closed; do not close it again!");let e=this._controlledReadableByteStream._state;if("readable"!==e)throw TypeError(`The stream (in ${e} state) is not in the readable state and cannot be closed`);!function(e){let t=e._controlledReadableByteStream;if(!e._closeRequested&&"readable"===t._state){if(e._queueTotalSize>0)return void(e._closeRequested=!0);if(e._pendingPullIntos.length>0&&e._pendingPullIntos.peek().bytesFilled>0){let t=TypeError("Insufficient bytes to fill elements in the given buffer");throw ew(e,t),t}eS(e),tO(t)}}(this)}enqueue(e){if(!es(this))throw eP("enqueue");if(F(e,1,"enqueue"),!ArrayBuffer.isView(e))throw TypeError("chunk must be an array buffer view");if(0===e.byteLength)throw TypeError("chunk must have non-zero byteLength");if(0===e.buffer.byteLength)throw TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw TypeError("stream is closed or draining");let t=this._controlledReadableByteStream._state;if("readable"!==t)throw TypeError(`The stream (in ${t} state) is not in the readable state and cannot be enqueued to`);!function(e,t){let r=e._controlledReadableByteStream;if(e._closeRequested||"readable"!==r._state)return;let o=t.buffer,n=t.byteOffset,i=t.byteLength;Y(r)?0===Q(r)?e_(e,o,n,i):N(r,new Uint8Array(o,n,i),!1):eC(r)?(e_(e,o,n,i),ey(e)):e_(e,o,n,i),ed(e)}(this,e)}error(e){if(!es(this))throw eP("error");ew(this,e)}[k](e){this._pendingPullIntos.length>0&&(this._pendingPullIntos.peek().bytesFilled=0),en(this);let t=this._cancelAlgorithm(e);return eS(this),t}[O](e){let t=this._controlledReadableByteStream;if(this._queueTotalSize>0){let t=this._queue.shift();this._queueTotalSize-=t.byteLength,ep(this);let r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return void e._chunkSteps(r)}let r=this._autoAllocateChunkSize;if(void 0!==r){let t;try{t=new ArrayBuffer(r)}catch(t){return void e._errorSteps(t)}let o={buffer:t,byteOffset:0,byteLength:r,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(o)}x(t,e),ed(this)}}function es(e){return!!l(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")}function eu(e){return!!l(e)&&!!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")}function ed(e){if(function(e){let t=e._controlledReadableByteStream;return"readable"===t._state&&!e._closeRequested&&!!e._started&&!!(Y(t)&&Q(t)>0||eC(t)&&eE(t)>0||eR(e)>0)}(e)){if(e._pulling)return void(e._pullAgain=!0);e._pulling=!0,f(e._pullAlgorithm(),()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,ed(e))},t=>{ew(e,t)})}}function ec(e,t){let r=!1;"closed"===e._state&&(r=!0);let o=eh(t);"default"===t.readerType?N(e,o,r):function(e,t,r){let o=e._reader._readIntoRequests.shift();r?o._closeSteps(t):o._chunkSteps(t)}(e,o,r)}function eh(e){let t=e.bytesFilled,r=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,t/r)}function e_(e,t,r,o){e._queue.push({buffer:t,byteOffset:r,byteLength:o}),e._queueTotalSize+=o}function ef(e,t){var r,o,n;let i=t.elementSize,a=t.bytesFilled-t.bytesFilled%i,l=Math.min(e._queueTotalSize,t.byteLength-t.bytesFilled),s=t.bytesFilled+l,u=s-s%i,d=l,c=!1;u>a&&(d=u-t.bytesFilled,c=!0);let h=e._queue;for(;d>0;){let i=h.peek(),a=Math.min(d,i.byteLength),l=t.byteOffset+t.bytesFilled;r=t.buffer,o=i.buffer,n=i.byteOffset,new Uint8Array(r).set(new Uint8Array(o,n,a),l),i.byteLength===a?h.shift():(i.byteOffset+=a,i.byteLength-=a),e._queueTotalSize-=a,eb(e,a,t),d-=a}return c}function eb(e,t,r){em(e),r.bytesFilled+=t}function ep(e){0===e._queueTotalSize&&e._closeRequested?(eS(e),tO(e._controlledReadableByteStream)):ed(e)}function em(e){null!==e._byobRequest&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function ey(e){for(;e._pendingPullIntos.length>0;){if(0===e._queueTotalSize)return;let t=e._pendingPullIntos.peek();ef(e,t)&&(ev(e),ec(e._controlledReadableByteStream,t))}}function eg(e,t){let r=e._pendingPullIntos.peek();if("closed"===e._controlledReadableByteStream._state){if(0!==t)throw TypeError("bytesWritten must be 0 when calling respond() on a closed stream");!function(e,t){t.buffer=t.buffer;let r=e._controlledReadableByteStream;if(eC(r))for(;eE(r)>0;)ec(r,ev(e))}(e,r)}else!function(e,t,r){if(r.bytesFilled+t>r.byteLength)throw RangeError("bytesWritten out of range");if(eb(e,t,r),r.bytesFilled<r.elementSize)return;ev(e);let o=r.bytesFilled%r.elementSize;if(o>0){let t=r.byteOffset+r.bytesFilled,n=r.buffer.slice(t-o,t);e_(e,n,0,n.byteLength)}r.buffer=r.buffer,r.bytesFilled-=o,ec(e._controlledReadableByteStream,r),ey(e)}(e,t,r);ed(e)}function ev(e){let t=e._pendingPullIntos.shift();return em(e),t}function eS(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function ew(e,t){let r=e._controlledReadableByteStream;"readable"===r._state&&(em(e),e._pendingPullIntos=new g,en(e),eS(e),tW(r,t))}function eR(e){let t=e._controlledReadableByteStream._state;return"errored"===t?null:"closed"===t?0:e._strategyHWM-e._queueTotalSize}function eT(e){return TypeError(`ReadableStreamBYOBRequest.prototype.${e} can only be used on a ReadableStreamBYOBRequest`)}function eP(e){return TypeError(`ReadableByteStreamController.prototype.${e} can only be used on a ReadableByteStreamController`)}function eq(e,t){e._reader._readIntoRequests.push(t)}function eE(e){return e._reader._readIntoRequests.length}function eC(e){let t=e._reader;return void 0!==t&&!!eO(t)}Object.defineProperties(el.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),"symbol"==typeof n.toStringTag&&Object.defineProperty(el.prototype,n.toStringTag,{value:"ReadableByteStreamController",configurable:!0});class ek{constructor(e){if(F(e,1,"ReadableStreamBYOBReader"),$(e,"First parameter"),tC(e))throw TypeError("This stream has already been locked for exclusive reading by another reader");if(!es(e._readableStreamController))throw TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");v(this,e),this._readIntoRequests=new g}get closed(){return eO(this)?this._closedPromise:c(eW("closed"))}cancel(e){return eO(this)?void 0===this._ownerReadableStream?c(R("cancel")):S(this,e):c(eW("cancel"))}read(e){let t,r;if(!eO(this))return c(eW("read"));if(!ArrayBuffer.isView(e))return c(TypeError("view must be an array buffer view"));if(0===e.byteLength)return c(TypeError("view must have non-zero byteLength"));if(0===e.buffer.byteLength)return c(TypeError("view's buffer must have non-zero byteLength"));if(void 0===this._ownerReadableStream)return c(R("read from"));let o=h((e,o)=>{t=e,r=o});return function(e,t,r){let o=e._ownerReadableStream;o._disturbed=!0,"errored"===o._state?r._errorSteps(o._storedError):function(e,t,r){let o=e._controlledReadableByteStream,n=1;t.constructor!==DataView&&(n=t.constructor.BYTES_PER_ELEMENT);let i=t.constructor,a={buffer:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength,bytesFilled:0,elementSize:n,viewConstructor:i,readerType:"byob"};if(e._pendingPullIntos.length>0)return e._pendingPullIntos.push(a),void eq(o,r);if("closed"!==o._state){if(e._queueTotalSize>0){if(ef(e,a)){let t=eh(a);return ep(e),void r._chunkSteps(t)}if(e._closeRequested){let t=TypeError("Insufficient bytes to fill elements in the given buffer");return ew(e,t),void r._errorSteps(t)}}e._pendingPullIntos.push(a),eq(o,r),ed(e)}else{let e=new i(a.buffer,a.byteOffset,0);r._closeSteps(e)}}(o._readableStreamController,t,r)}(this,e,{_chunkSteps:e=>t({value:e,done:!1}),_closeSteps:e=>t({value:e,done:!0}),_errorSteps:e=>r(e)}),o}releaseLock(){if(!eO(this))throw eW("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readIntoRequests.length>0)throw TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");w(this)}}}function eO(e){return!!l(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")}function eW(e){return TypeError(`ReadableStreamBYOBReader.prototype.${e} can only be used on a ReadableStreamBYOBReader`)}function ej(e,t){let{highWaterMark:r}=e;if(void 0===r)return t;if(ee(r)||r<0)throw RangeError("Invalid highWaterMark");return r}function eA(e){let{size:t}=e;return t||(()=>1)}function ez(e,t){A(e,t);let r=null==e?void 0:e.highWaterMark,o=null==e?void 0:e.size;return{highWaterMark:void 0===r?void 0:L(r),size:void 0===o?void 0:(z(o,t+" has member 'size' that"),e=>L(o(e)))}}function eB(e,t){if(!eL(e))throw TypeError(t+" is not a WritableStream.")}Object.defineProperties(ek.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),"symbol"==typeof n.toStringTag&&Object.defineProperty(ek.prototype,n.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});class eF{constructor(e={},t={}){void 0===e?e=null:B(e,"First parameter");let r=ez(t,"Second parameter"),o=function(e,t){A(e,t);let r=null==e?void 0:e.abort,o=null==e?void 0:e.close,n=null==e?void 0:e.start,i=null==e?void 0:e.type,a=null==e?void 0:e.write;return{abort:void 0===r?void 0:(z(r,t+" has member 'abort' that"),t=>y(r,e,[t])),close:void 0===o?void 0:(z(o,t+" has member 'close' that"),()=>y(o,e,[])),start:void 0===n?void 0:(z(n,t+" has member 'start' that"),t=>m(n,e,[t])),write:void 0===a?void 0:(z(a,t+" has member 'write' that"),(t,r)=>y(a,e,[t,r])),type:i}}(e,"First parameter");if(eI(this),void 0!==o.type)throw RangeError("Invalid type is specified");let n=eA(r);!function(e,t,r,o){let n=Object.create(e1.prototype),i=()=>{},a=()=>d(void 0),l=()=>d(void 0),s=()=>d(void 0);void 0!==t.start&&(i=()=>t.start(n)),void 0!==t.write&&(a=e=>t.write(e,n)),void 0!==t.close&&(l=()=>t.close()),void 0!==t.abort&&(s=e=>t.abort(e)),e8(e,n,i,a,l,s,r,o)}(this,o,ej(r,1),n)}get locked(){if(!eL(this))throw e5("locked");return eM(this)}abort(e){return eL(this)?eM(this)?c(TypeError("Cannot abort a stream that already has a writer")):e$(this,e):c(e5("abort"))}close(){return eL(this)?eM(this)?c(TypeError("Cannot close a stream that already has a writer")):eY(this)?c(TypeError("Cannot close an already-closing stream")):eD(this):c(e5("close"))}getWriter(){if(!eL(this))throw e5("getWriter");return new eU(this)}}function eI(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new g,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function eL(e){return!!l(e)&&!!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")}function eM(e){return void 0!==e._writer}function e$(e,t){let r=e._state;if("closed"===r||"errored"===r)return d(void 0);if(void 0!==e._pendingAbortRequest)return e._pendingAbortRequest._promise;let o=!1;"erroring"===r&&(o=!0,t=void 0);let n=h((r,n)=>{e._pendingAbortRequest={_promise:void 0,_resolve:r,_reject:n,_reason:t,_wasAlreadyErroring:o}});return e._pendingAbortRequest._promise=n,o||eN(e,t),n}function eD(e){var t;let r=e._state;if("closed"===r||"errored"===r)return c(TypeError(`The stream (in ${r} state) is not in the writable state and cannot be closed`));let o=h((t,r)=>{e._closeRequest={_resolve:t,_reject:r}}),n=e._writer;return void 0!==n&&e._backpressure&&"writable"===r&&tl(n),eo(t=e._writableStreamController,e0,0),e6(t),o}function ex(e,t){"writable"!==e._state?eQ(e):eN(e,t)}function eN(e,t){let r=e._writableStreamController;e._state="erroring",e._storedError=t;let o=e._writer;void 0!==o&&eJ(o,t),!(void 0!==e._inFlightWriteRequest||void 0!==e._inFlightCloseRequest)&&r._started&&eQ(e)}function eQ(e){e._state="errored",e._writableStreamController[C]();let t=e._storedError;if(e._writeRequests.forEach(e=>{e._reject(t)}),e._writeRequests=new g,void 0===e._pendingAbortRequest)return void eH(e);let r=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,r._wasAlreadyErroring)return r._reject(t),void eH(e);f(e._writableStreamController[E](r._reason),()=>{r._resolve(),eH(e)},t=>{r._reject(t),eH(e)})}function eY(e){return void 0!==e._closeRequest||void 0!==e._inFlightCloseRequest}function eH(e){void 0!==e._closeRequest&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);let t=e._writer;void 0!==t&&tr(t,e._storedError)}function eV(e,t){let r=e._writer;void 0!==r&&t!==e._backpressure&&(t?tn(r):tl(r)),e._backpressure=t}Object.defineProperties(eF.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),"symbol"==typeof n.toStringTag&&Object.defineProperty(eF.prototype,n.toStringTag,{value:"WritableStream",configurable:!0});class eU{constructor(e){if(F(e,1,"WritableStreamDefaultWriter"),eB(e,"First parameter"),eM(e))throw TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=e,e._writer=this;let t=e._state;if("writable"===t)!eY(e)&&e._backpressure?tn(this):function(e){tn(e),tl(e)}(this),tt(this);else if("erroring"===t)ti(this,e._storedError),tt(this);else if("closed"===t)(function(e){tn(e),tl(e)})(this),tt(this),to(this);else{let t=e._storedError;ti(this,t),function(e,t){tt(e),tr(e,t)}(this,t)}}get closed(){return eG(this)?this._closedPromise:c(e7("closed"))}get desiredSize(){if(!eG(this))throw e7("desiredSize");if(void 0===this._ownerWritableStream)throw te("desiredSize");return function(e){let t=e._ownerWritableStream,r=t._state;return"errored"===r||"erroring"===r?null:"closed"===r?0:e4(t._writableStreamController)}(this)}get ready(){return eG(this)?this._readyPromise:c(e7("ready"))}abort(e){return eG(this)?void 0===this._ownerWritableStream?c(te("abort")):e$(this._ownerWritableStream,e):c(e7("abort"))}close(){if(!eG(this))return c(e7("close"));let e=this._ownerWritableStream;return void 0===e?c(te("close")):eY(e)?c(TypeError("Cannot close an already-closing stream")):eX(this)}releaseLock(){if(!eG(this))throw e7("releaseLock");void 0!==this._ownerWritableStream&&eK(this)}write(e){return eG(this)?void 0===this._ownerWritableStream?c(te("write to")):eZ(this,e):c(e7("write"))}}function eG(e){return!!l(e)&&!!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")}function eX(e){return eD(e._ownerWritableStream)}function eJ(e,t){"pending"===e._readyPromiseState?ta(e,t):ti(e,t)}function eK(e){let t=e._ownerWritableStream,r=TypeError("Writer was released and can no longer be used to monitor the stream's closedness");eJ(e,r),"pending"===e._closedPromiseState||tt(e),tr(e,r),t._writer=void 0,e._ownerWritableStream=void 0}function eZ(e,t){let r=e._ownerWritableStream,o=r._writableStreamController,n=function(e,t){try{return e._strategySizeAlgorithm(t)}catch(t){return e2(e,t),1}}(o,t);if(r!==e._ownerWritableStream)return c(te("write to"));let i=r._state;if("errored"===i)return c(r._storedError);if(eY(r)||"closed"===i)return c(TypeError("The stream is closing or closed and cannot be written to"));if("erroring"===i)return c(r._storedError);let a=h((e,t)=>{r._writeRequests.push({_resolve:e,_reject:t})});return function(e,t,r){try{eo(e,t,r)}catch(t){return void e2(e,t)}let o=e._controlledWritableStream;eY(o)||"writable"!==o._state||eV(o,0>=e4(e)),e6(e)}(o,t,n),a}Object.defineProperties(eU.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),"symbol"==typeof n.toStringTag&&Object.defineProperty(eU.prototype,n.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});let e0={};class e1{constructor(){throw TypeError("Illegal constructor")}error(e){if(!(l(this)&&Object.prototype.hasOwnProperty.call(this,"_controlledWritableStream")))throw TypeError("WritableStreamDefaultController.prototype.error can only be used on a WritableStreamDefaultController");"writable"===this._controlledWritableStream._state&&e9(this,e)}[E](e){let t=this._abortAlgorithm(e);return e3(this),t}[C](){en(this)}}function e8(e,t,r,o,n,i,a,l){t._controlledWritableStream=e,e._writableStreamController=t,t._queue=void 0,t._queueTotalSize=void 0,en(t),t._started=!1,t._strategySizeAlgorithm=l,t._strategyHWM=a,t._writeAlgorithm=o,t._closeAlgorithm=n,t._abortAlgorithm=i,eV(e,0>=e4(t)),f(d(r()),()=>{t._started=!0,e6(t)},r=>{t._started=!0,ex(e,r)})}function e3(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function e4(e){return e._strategyHWM-e._queueTotalSize}function e6(e){let t=e._controlledWritableStream;if(!e._started||void 0!==t._inFlightWriteRequest)return;if("erroring"===t._state)return void eQ(t);if(0===e._queue.length)return;let r=e._queue.peek().value;r===e0?function(e){let t=e._controlledWritableStream;t._inFlightCloseRequest=t._closeRequest,t._closeRequest=void 0,er(e);let r=e._closeAlgorithm();e3(e),f(r,()=>{!function(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0,"erroring"===e._state&&(e._storedError=void 0,void 0!==e._pendingAbortRequest&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";let t=e._writer;void 0!==t&&to(t)}(t)},e=>{t._inFlightCloseRequest._reject(e),t._inFlightCloseRequest=void 0,void 0!==t._pendingAbortRequest&&(t._pendingAbortRequest._reject(e),t._pendingAbortRequest=void 0),ex(t,e)})}(e):function(e,t){let r=e._controlledWritableStream;r._inFlightWriteRequest=r._writeRequests.shift(),f(e._writeAlgorithm(t),()=>{r._inFlightWriteRequest._resolve(void 0),r._inFlightWriteRequest=void 0;let t=r._state;er(e),eY(r)||"writable"!==t||eV(r,0>=e4(e)),e6(e)},t=>{"writable"===r._state&&e3(e),r._inFlightWriteRequest._reject(t),r._inFlightWriteRequest=void 0,ex(r,t)})}(e,r)}function e2(e,t){"writable"===e._controlledWritableStream._state&&e9(e,t)}function e9(e,t){let r=e._controlledWritableStream;e3(e),eN(r,t)}function e5(e){return TypeError(`WritableStream.prototype.${e} can only be used on a WritableStream`)}function e7(e){return TypeError(`WritableStreamDefaultWriter.prototype.${e} can only be used on a WritableStreamDefaultWriter`)}function te(e){return TypeError("Cannot "+e+" a stream using a released writer")}function tt(e){e._closedPromise=h((t,r)=>{e._closedPromise_resolve=t,e._closedPromise_reject=r,e._closedPromiseState="pending"})}function tr(e,t){void 0!==e._closedPromise_reject&&(b(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function to(e){void 0!==e._closedPromise_resolve&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function tn(e){e._readyPromise=h((t,r)=>{e._readyPromise_resolve=t,e._readyPromise_reject=r}),e._readyPromiseState="pending"}function ti(e,t){tn(e),ta(e,t)}function ta(e,t){void 0!==e._readyPromise_reject&&(b(e._readyPromise),e._readyPromise_reject(t),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function tl(e){void 0!==e._readyPromise_resolve&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}Object.defineProperties(e1.prototype,{error:{enumerable:!0}}),"symbol"==typeof n.toStringTag&&Object.defineProperty(e1.prototype,n.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});let ts="undefined"!=typeof DOMException?DOMException:void 0,tu=!function(e){if("function"!=typeof e&&"object"!=typeof e)return!1;try{return new e,!0}catch(e){return!1}}(ts)?function(){let e=function(e,t){this.message=e||"",this.name=t||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return Object.defineProperty(e.prototype=Object.create(Error.prototype),"constructor",{value:e,writable:!0,configurable:!0}),e}():ts;function td(e,t,r,o,n,a){let l=D(e),s=new eU(t);e._disturbed=!0;let u=!1,p=d(void 0);return h((m,y)=>{var g,v;let S;if(void 0!==a){if(S=()=>{let r=new tu("Aborted","AbortError"),i=[];o||i.push(()=>"writable"===t._state?e$(t,r):d(void 0)),n||i.push(()=>"readable"===e._state?tk(e,r):d(void 0)),P(()=>Promise.all(i.map(e=>e())),!0,r)},a.aborted)return void S();a.addEventListener("abort",S)}if(T(e,l._closedPromise,e=>{o?q(!0,e):P(()=>e$(t,e),!0,e)}),T(t,s._closedPromise,t=>{n?q(!0,t):P(()=>tk(e,t),!0,t)}),g=l._closedPromise,v=()=>{r?q():P(()=>(function(e){let t=e._ownerWritableStream,r=t._state;return eY(t)||"closed"===r?d(void 0):"errored"===r?c(t._storedError):eX(e)})(s))},"closed"===e._state?v():f(g,v),eY(t)||"closed"===t._state){let t=TypeError("the destination writable stream closed before all data could be piped to it");n?q(!0,t):P(()=>tk(e,t),!0,t)}function R(){let e=p;return _(p,()=>e!==p?R():void 0)}function T(e,t,r){"errored"===e._state?r(e._storedError):f(t,void 0,r)}function P(e,r,o){function n(){f(e(),()=>E(r,o),e=>E(!0,e))}u||(u=!0,"writable"!==t._state||eY(t)?n():f(R(),n))}function q(e,r){u||(u=!0,"writable"!==t._state||eY(t)?E(e,r):f(R(),()=>E(e,r)))}function E(e,t){eK(s),w(l),void 0!==a&&a.removeEventListener("abort",S),e?y(t):m(void 0)}b(h((e,t)=>{!function r(o){o?e():_(u?d(!0):_(s._readyPromise,()=>h((e,t)=>{U(l,{_chunkSteps:t=>{p=_(eZ(s,t),void 0,i),e(!1)},_closeSteps:()=>e(!0),_errorSteps:t})})),r,t)}(!1)}))})}class tc{constructor(){throw TypeError("Illegal constructor")}get desiredSize(){if(!th(this))throw tw("desiredSize");return tg(this)}close(){if(!th(this))throw tw("close");if(!tv(this))throw TypeError("The stream is not in a state that permits close");tp(this)}enqueue(e){if(!th(this))throw tw("enqueue");if(!tv(this))throw TypeError("The stream is not in a state that permits enqueue");return tm(this,e)}error(e){if(!th(this))throw tw("error");ty(this,e)}[k](e){en(this);let t=this._cancelAlgorithm(e);return tb(this),t}[O](e){let t=this._controlledReadableStream;if(this._queue.length>0){let r=er(this);this._closeRequested&&0===this._queue.length?(tb(this),tO(t)):t_(this),e._chunkSteps(r)}else x(t,e),t_(this)}}function th(e){return!!l(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")}function t_(e){if(tf(e)){if(e._pulling)return void(e._pullAgain=!0);e._pulling=!0,f(e._pullAlgorithm(),()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,t_(e))},t=>{ty(e,t)})}}function tf(e){let t=e._controlledReadableStream;return!!tv(e)&&!!e._started&&(!!(tC(t)&&Q(t)>0)||tg(e)>0)}function tb(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function tp(e){if(!tv(e))return;let t=e._controlledReadableStream;e._closeRequested=!0,0===e._queue.length&&(tb(e),tO(t))}function tm(e,t){if(!tv(e))return;let r=e._controlledReadableStream;if(tC(r)&&Q(r)>0)N(r,t,!1);else{let r;try{r=e._strategySizeAlgorithm(t)}catch(t){throw ty(e,t),t}try{eo(e,t,r)}catch(t){throw ty(e,t),t}}t_(e)}function ty(e,t){let r=e._controlledReadableStream;"readable"===r._state&&(en(e),tb(e),tW(r,t))}function tg(e){let t=e._controlledReadableStream._state;return"errored"===t?null:"closed"===t?0:e._strategyHWM-e._queueTotalSize}function tv(e){let t=e._controlledReadableStream._state;return!e._closeRequested&&"readable"===t}function tS(e,t,r,o,n,i,a){t._controlledReadableStream=e,t._queue=void 0,t._queueTotalSize=void 0,en(t),t._started=!1,t._closeRequested=!1,t._pullAgain=!1,t._pulling=!1,t._strategySizeAlgorithm=a,t._strategyHWM=i,t._pullAlgorithm=o,t._cancelAlgorithm=n,e._readableStreamController=t,f(d(r()),()=>{t._started=!0,t_(t)},e=>{ty(t,e)})}function tw(e){return TypeError(`ReadableStreamDefaultController.prototype.${e} can only be used on a ReadableStreamDefaultController`)}function tR(e,t){A(e,t);let r=null==e?void 0:e.preventAbort,o=null==e?void 0:e.preventCancel,n=null==e?void 0:e.preventClose,i=null==e?void 0:e.signal;return void 0!==i&&function(e,t){if(!function(e){if("object"!=typeof e||null===e)return!1;try{return"boolean"==typeof e.aborted}catch(e){return!1}}(e))throw TypeError(t+" is not an AbortSignal.")}(i,t+" has member 'signal' that"),{preventAbort:!!r,preventCancel:!!o,preventClose:!!n,signal:i}}Object.defineProperties(tc.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),"symbol"==typeof n.toStringTag&&Object.defineProperty(tc.prototype,n.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});class tT{constructor(e={},t={}){void 0===e?e=null:B(e,"First parameter");let r=ez(t,"Second parameter"),o=function(e,t){A(e,t);let r=null==e?void 0:e.autoAllocateChunkSize,o=null==e?void 0:e.cancel,n=null==e?void 0:e.pull,i=null==e?void 0:e.start,a=null==e?void 0:e.type;return{autoAllocateChunkSize:void 0===r?void 0:M(r,t+" has member 'autoAllocateChunkSize' that"),cancel:void 0===o?void 0:(z(o,t+" has member 'cancel' that"),t=>y(o,e,[t])),pull:void 0===n?void 0:(z(n,t+" has member 'pull' that"),t=>y(n,e,[t])),start:void 0===i?void 0:(z(i,t+" has member 'start' that"),t=>m(i,e,[t])),type:void 0===a?void 0:function(e,t){if("bytes"!=(e=""+e))throw TypeError(`${t} '${e}' is not a valid enumeration value for ReadableStreamType`);return e}(a,t+" has member 'type' that")}}(e,"First parameter");if(tq(this),"bytes"===o.type){if(void 0!==r.size)throw RangeError("The strategy for a byte stream cannot have a size function");!function(e,t,r){var o,n,i;let a=Object.create(el.prototype),l=()=>{},s=()=>d(void 0),u=()=>d(void 0);void 0!==t.start&&(l=()=>t.start(a)),void 0!==t.pull&&(s=()=>t.pull(a)),void 0!==t.cancel&&(u=e=>t.cancel(e));let c=t.autoAllocateChunkSize;if(0===c)throw TypeError("autoAllocateChunkSize must be greater than 0");o=l,n=s,i=u,a._controlledReadableByteStream=e,a._pullAgain=!1,a._pulling=!1,a._byobRequest=null,a._queue=a._queueTotalSize=void 0,en(a),a._closeRequested=!1,a._started=!1,a._strategyHWM=r,a._pullAlgorithm=n,a._cancelAlgorithm=i,a._autoAllocateChunkSize=c,a._pendingPullIntos=new g,e._readableStreamController=a,f(d(o()),()=>{a._started=!0,ed(a)},e=>{ew(a,e)})}(this,o,ej(r,0))}else{let e=eA(r);!function(e,t,r,o){let n=Object.create(tc.prototype),i=()=>{},a=()=>d(void 0),l=()=>d(void 0);void 0!==t.start&&(i=()=>t.start(n)),void 0!==t.pull&&(a=()=>t.pull(n)),void 0!==t.cancel&&(l=e=>t.cancel(e)),tS(e,n,i,a,l,r,o)}(this,o,ej(r,1),e)}}get locked(){if(!tE(this))throw tj("locked");return tC(this)}cancel(e){return tE(this)?tC(this)?c(TypeError("Cannot cancel a stream that already has a reader")):tk(this,e):c(tj("cancel"))}getReader(e){if(!tE(this))throw tj("getReader");return void 0===function(e,t){A(e,t);let r=null==e?void 0:e.mode;return{mode:void 0===r?void 0:function(e,t){if("byob"!=(e=""+e))throw TypeError(`${t} '${e}' is not a valid enumeration value for ReadableStreamReaderMode`);return e}(r,t+" has member 'mode' that")}}(e,"First parameter").mode?D(this):new ek(this)}pipeThrough(e,t={}){if(!tE(this))throw tj("pipeThrough");F(e,1,"pipeThrough");let r=function(e,t){A(e,t);let r=null==e?void 0:e.readable;I(r,"readable","ReadableWritablePair"),$(r,t+" has member 'readable' that");let o=null==e?void 0:e.writable;return I(o,"writable","ReadableWritablePair"),eB(o,t+" has member 'writable' that"),{readable:r,writable:o}}(e,"First parameter"),o=tR(t,"Second parameter");if(tC(this))throw TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(eM(r.writable))throw TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");return b(td(this,r.writable,o.preventClose,o.preventAbort,o.preventCancel,o.signal)),r.readable}pipeTo(e,t={}){let r;if(!tE(this))return c(tj("pipeTo"));if(void 0===e)return c("Parameter 1 is required in 'pipeTo'.");if(!eL(e))return c(TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));try{r=tR(t,"Second parameter")}catch(e){return c(e)}return tC(this)?c(TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):eM(e)?c(TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):td(this,e,r.preventClose,r.preventAbort,r.preventCancel,r.signal)}tee(){if(!tE(this))throw tj("tee");let e=function(e,t){let r=D(e),o,n,i,a,l,s=!1,u=!1,c=!1,_=h(e=>{l=e});function b(){return s||(s=!0,U(r,{_chunkSteps:e=>{p(()=>{s=!1,u||tm(i._readableStreamController,e),c||tm(a._readableStreamController,e)})},_closeSteps:()=>{s=!1,u||tp(i._readableStreamController),c||tp(a._readableStreamController),u&&c||l(void 0)},_errorSteps:()=>{s=!1}})),d(void 0)}function m(){}return i=tP(m,b,function(t){if(u=!0,o=t,c){let t=tk(e,ei([o,n]));l(t)}return _}),a=tP(m,b,function(t){if(c=!0,n=t,u){let t=tk(e,ei([o,n]));l(t)}return _}),f(r._closedPromise,void 0,e=>{ty(i._readableStreamController,e),ty(a._readableStreamController,e),u&&c||l(void 0)}),[i,a]}(this);return ei(e)}values(e){if(!tE(this))throw tj("values");return function(e,t){let r=new X(D(e),t),o=Object.create(J);return o._asyncIteratorImpl=r,o}(this,(A(e,"First parameter"),{preventCancel:!!(null==e?void 0:e.preventCancel)}).preventCancel)}}function tP(e,t,r,o=1,n=()=>1){let i=Object.create(tT.prototype);return tq(i),tS(i,Object.create(tc.prototype),e,t,r,o,n),i}function tq(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function tE(e){return!!l(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")}function tC(e){return void 0!==e._reader}function tk(e,t){return(e._disturbed=!0,"closed"===e._state)?d(void 0):"errored"===e._state?c(e._storedError):(tO(e),_(e._readableStreamController[k](t),i,void 0))}function tO(e){e._state="closed";let t=e._reader;void 0!==t&&(q(t),V(t)&&(t._readRequests.forEach(e=>{e._closeSteps()}),t._readRequests=new g))}function tW(e,t){e._state="errored",e._storedError=t;let r=e._reader;void 0!==r&&(P(r,t),V(r)?(r._readRequests.forEach(e=>{e._errorSteps(t)}),r._readRequests=new g):(r._readIntoRequests.forEach(e=>{e._errorSteps(t)}),r._readIntoRequests=new g))}function tj(e){return TypeError(`ReadableStream.prototype.${e} can only be used on a ReadableStream`)}function tA(e,t){A(e,t);let r=null==e?void 0:e.highWaterMark;return I(r,"highWaterMark","QueuingStrategyInit"),{highWaterMark:L(r)}}Object.defineProperties(tT.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),"symbol"==typeof n.toStringTag&&Object.defineProperty(tT.prototype,n.toStringTag,{value:"ReadableStream",configurable:!0}),"symbol"==typeof n.asyncIterator&&Object.defineProperty(tT.prototype,n.asyncIterator,{value:tT.prototype.values,writable:!0,configurable:!0});let tz=function(e){return e.byteLength};class tB{constructor(e){F(e,1,"ByteLengthQueuingStrategy"),e=tA(e,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=e.highWaterMark}get highWaterMark(){if(!tI(this))throw tF("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!tI(this))throw tF("size");return tz}}function tF(e){return TypeError(`ByteLengthQueuingStrategy.prototype.${e} can only be used on a ByteLengthQueuingStrategy`)}function tI(e){return!!l(e)&&!!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")}Object.defineProperties(tB.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),"symbol"==typeof n.toStringTag&&Object.defineProperty(tB.prototype,n.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});let tL=function(){return 1};class tM{constructor(e){F(e,1,"CountQueuingStrategy"),e=tA(e,"First parameter"),this._countQueuingStrategyHighWaterMark=e.highWaterMark}get highWaterMark(){if(!tD(this))throw t$("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!tD(this))throw t$("size");return tL}}function t$(e){return TypeError(`CountQueuingStrategy.prototype.${e} can only be used on a CountQueuingStrategy`)}function tD(e){return!!l(e)&&!!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")}Object.defineProperties(tM.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),"symbol"==typeof n.toStringTag&&Object.defineProperty(tM.prototype,n.toStringTag,{value:"CountQueuingStrategy",configurable:!0});class tx{constructor(e={},t={},r={}){let o;void 0===e&&(e=null);let n=ez(t,"Second parameter"),i=ez(r,"Third parameter"),a=function(e,t){A(e,t);let r=null==e?void 0:e.flush,o=null==e?void 0:e.readableType,n=null==e?void 0:e.start,i=null==e?void 0:e.transform,a=null==e?void 0:e.writableType;return{flush:void 0===r?void 0:(z(r,t+" has member 'flush' that"),t=>y(r,e,[t])),readableType:o,start:void 0===n?void 0:(z(n,t+" has member 'start' that"),t=>m(n,e,[t])),transform:void 0===i?void 0:(z(i,t+" has member 'transform' that"),(t,r)=>y(i,e,[t,r])),writableType:a}}(e,"First parameter");if(void 0!==a.readableType)throw RangeError("Invalid readableType specified");if(void 0!==a.writableType)throw RangeError("Invalid writableType specified");let l=ej(i,0),s=eA(i),u=ej(n,1),f=eA(n);!function(e,t,r,o,n,i){function a(){return t}e._writable=function(e,t,r,o,n=1,i=()=>1){let a=Object.create(eF.prototype);return eI(a),e8(a,Object.create(e1.prototype),e,t,r,o,n,i),a}(a,function(t){return function(e,t){let r=e._transformStreamController;return e._backpressure?_(e._backpressureChangePromise,()=>{let o=e._writable;if("erroring"===o._state)throw o._storedError;return tJ(r,t)},void 0):tJ(r,t)}(e,t)},function(){return function(e){let t=e._readable,r=e._transformStreamController,o=r._flushAlgorithm();return tG(r),_(o,()=>{if("errored"===t._state)throw t._storedError;tp(t._readableStreamController)},r=>{throw tQ(e,r),t._storedError})}(e)},function(t){return tQ(e,t),d(void 0)},r,o),e._readable=tP(a,function(){return tH(e,!1),e._backpressureChangePromise},function(t){return tY(e,t),d(void 0)},n,i),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,tH(e,!0),e._transformStreamController=void 0}(this,h(e=>{o=e}),u,f,l,s),function(e,t){var r,o;let n=Object.create(tV.prototype),i=e=>{try{var t;return tX(n,e),t=void 0,d(t)}catch(e){return c(e)}},a=()=>d(void 0);void 0!==t.transform&&(i=e=>t.transform(e,n)),void 0!==t.flush&&(a=()=>t.flush(n)),r=i,o=a,n._controlledTransformStream=e,e._transformStreamController=n,n._transformAlgorithm=r,n._flushAlgorithm=o}(this,a),void 0!==a.start?o(a.start(this._transformStreamController)):o(void 0)}get readable(){if(!tN(this))throw tZ("readable");return this._readable}get writable(){if(!tN(this))throw tZ("writable");return this._writable}}function tN(e){return!!l(e)&&!!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")}function tQ(e,t){ty(e._readable._readableStreamController,t),tY(e,t)}function tY(e,t){tG(e._transformStreamController),e2(e._writable._writableStreamController,t),e._backpressure&&tH(e,!1)}function tH(e,t){void 0!==e._backpressureChangePromise&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=h(t=>{e._backpressureChangePromise_resolve=t}),e._backpressure=t}Object.defineProperties(tx.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),"symbol"==typeof n.toStringTag&&Object.defineProperty(tx.prototype,n.toStringTag,{value:"TransformStream",configurable:!0});class tV{constructor(){throw TypeError("Illegal constructor")}get desiredSize(){if(!tU(this))throw tK("desiredSize");return tg(this._controlledTransformStream._readable._readableStreamController)}enqueue(e){if(!tU(this))throw tK("enqueue");tX(this,e)}error(e){if(!tU(this))throw tK("error");tQ(this._controlledTransformStream,e)}terminate(){if(!tU(this))throw tK("terminate");!function(e){let t=e._controlledTransformStream;tp(t._readable._readableStreamController),tY(t,TypeError("TransformStream terminated"))}(this)}}function tU(e){return!!l(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")}function tG(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0}function tX(e,t){let r=e._controlledTransformStream,o=r._readable._readableStreamController;if(!tv(o))throw TypeError("Readable side is not in a state that permits enqueue");try{tm(o,t)}catch(e){throw tY(r,e),r._readable._storedError}!tf(o)!==r._backpressure&&tH(r,!0)}function tJ(e,t){return _(e._transformAlgorithm(t),void 0,t=>{throw tQ(e._controlledTransformStream,t),t})}function tK(e){return TypeError(`TransformStreamDefaultController.prototype.${e} can only be used on a TransformStreamDefaultController`)}function tZ(e){return TypeError(`TransformStream.prototype.${e} can only be used on a TransformStream`)}Object.defineProperties(tV.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),"symbol"==typeof n.toStringTag&&Object.defineProperty(tV.prototype,n.toStringTag,{value:"TransformStreamDefaultController",configurable:!0})}}]);
